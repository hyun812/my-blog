---
title: 'useEffect ì •ë§ í•„ìš”í•œ ê³³ì—ì„œë§Œ ì“°ê³  ìˆì—ˆë‚˜ìš”?'
description: ë‚œ useEffectë¥¼ ì œëŒ€ë¡œ ì‚¬ìš©í•˜ê³  ìˆì—ˆì„ê¹Œ..?
category: react
emoji: ğŸ˜³
tags:
  - í”„ë¡ íŠ¸ì—”ë“œ
  - useEffect
  - íšŒê³ 
date: '2024.12.30'
fileName: 'useEffect'
readingTime: 10
---

# ê¸€ì„ ì‹œì‘í•˜ë©°

Reactì˜ `useEffect`ëŠ” `Side Effect`ë¥¼ ì²˜ë¦¬í•˜ëŠ” ê°•ë ¥í•œ í›…ì…ë‹ˆë‹¤. í•˜ì§€ë§Œ ë¬´ë¶„ë³„í•œ `useEffect` ì‚¬ìš©ì€ **ë¶ˆí•„ìš”í•œ ë Œë”ë§, ì„±ëŠ¥ ì €í•˜, ì˜ë„ì¹˜ ì•Šì€ ì˜¤ë¥˜, ê°€ë…ì„± ì €í•˜** ë“±ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ì´ë²ˆ ê¸€ì—ì„œëŠ” `useEffect`ì— ëŒ€í•´ ëª…í™•íˆ ì´í•´í•˜ê³ , ì˜¬ë°”ë¥´ê²Œ í™œìš©í•  ìˆ˜ ìˆëŠ” ë°©ë²•ì„ ì•Œì•„ë³´ë ¤ í•©ë‹ˆë‹¤.

# ì™œ useEffectë¼ê³  ì´ë¦„ì„ ì§€ì—ˆì„ê¹Œ?

[ë¦¬ì—‘íŠ¸ ê³µì‹ë¬¸ì„œ](https://react.dev/reference/react/useEffect)ì— ì˜í•˜ë©´ useEffectëŠ” ì™¸ë¶€ ì‹œìŠ¤í…œê³¼ ì»´í¬ë„ŒíŠ¸ë¥¼ ë™ê¸°í™” í•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” í›…ì´ë¼ê³  ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤.
ì—¬ê¸°ì„œ ë§í•˜ëŠ” **ì™¸ë¶€ ì‹œìŠ¤í…œ**ì´ë€ ì»´í¬ë„ŒíŠ¸ ì™¸ë¶€ì—ì„œ ë°œìƒí•˜ëŠ” ëª¨ë“  ê²ƒì„ ì˜ë¯¸í•˜ë©° ëŒ€í‘œì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ë“¤ì´ ìˆìŠµë‹ˆë‹¤.

- ë„¤íŠ¸ì›Œí¬ ìš”ì²­ (API í˜¸ì¶œ)
- íƒ€ì´ë¨¸ í•¨ìˆ˜ (setTimeout, setInterval)
- ì§ì ‘ì ì¸ DOM ì¡°ì‘

ì»´í¬ë„ŒíŠ¸ ë‚´ë¶€ì—ì„œ ìƒíƒœ(state)ë‚˜ ì†ì„±(props)ì˜ ë³€í™”ê°€ ë°œìƒí•  ë•Œ, ReactëŠ” ì´ë¥¼ ê°ì§€í•˜ê³  ë Œë”ë§ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.
í•˜ì§€ë§Œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì´ë‚˜ íƒ€ì´ë¨¸ í•¨ìˆ˜ì™€ ê°™ì€ ì‘ì—…ë“¤ì€ ë Œë”ë§ê³¼ ì§ì ‘ì ì¸ ê´€ë ¨ì´ ì—†ìœ¼ë©°, ì´ë¥¼ ì ì ˆíˆ ë¶„ë¦¬í•˜ì§€ ì•Šìœ¼ë©´ ë¶ˆí•„ìš”í•œ ë Œë”ë§, ì„±ëŠ¥ ì €í•˜ ë“±ì´ ë°œìƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì¦‰, ë Œë”ë§ê³¼ ë¬´ê´€í•œ ì‘ì—… `Side Effect`ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•´ ReactëŠ” `useEffect` í›…ì„ ì œê³µí•©ë‹ˆë‹¤.

## ê·¸ë˜ì„œ useEffectëŠ”?

ì—¬ê¸°ì„œ `Effect`ëŠ” ë¶€ìˆ˜íš¨ê³¼ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤. ì¦‰, UI ì—…í…Œì´íŠ¸ ê³¼ì •ê³¼ ë³„ê°œë¡œ ë°œìƒí•´ì•¼ í•˜ëŠ” ì‘ì—…ì„ ë‹¤ë£¨ë©° `useEffect`ëŠ” ë‹¤ìŒê³¼ ê°™ì€ íŠ¹ì§•ì„ ê°€ì§‘ë‹ˆë‹¤.

- ë Œë”ë§ëœ ì´í›„ ì‹¤í–‰: ì»´í¬ë„ŒíŠ¸ê°€ í™”ë©´ì— ê·¸ë ¤ì§„ í›„ ì‹¤í–‰

- íŠ¹ì • ì¡°ê±´ì— ë”°ë¼ ì‹¤í–‰: ì˜ì¡´ì„± ë°°ì—´(dependency array)ì„ í™œìš©í•˜ì—¬ íŠ¹ì • ì¡°ê±´ì— ì˜í•´ ì‹¤í–‰

- ì»´í¬ë„ŒíŠ¸ì˜ ìˆœìˆ˜ì„±ì„ ìœ ì§€: React ì»´í¬ë„ŒíŠ¸ëŠ” ìˆœìˆ˜ í•¨ìˆ˜ë¡œ ë™ì‘í•˜ëŠ” ê²ƒì´ ì´ìƒì ì´ë¯€ë¡œ, useEffectë¥¼ í™œìš©í•´ ë Œë”ë§ê³¼ ë¬´ê´€í•œ ì‘ì—…ì„ ë¶„ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> ì¦‰, useEffectëŠ” ë Œë”ë§ê³¼ ë¬´ê´€í•œ ì‘ì—…(ë¶€ìˆ˜ íš¨ê³¼)ë¥¼ ì²˜ë¦¬í•˜ê¸° ìœ„í•œ í›…

# useEffectê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆë‹¤

## props, state ë³€ê²½ì— ë”°ë¼ ë˜ ë‹¤ë¥¸ stateë¥¼ ì—…ë°ì´íŠ¸ í•´ì•¼í•  ë•Œ

- ê¸°ì¡´ propsë‚˜ stateì—ì„œ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤ë©´ stateì— ë„£ì§€ë§ê³  ë Œë”ë§ ì¤‘ì— ê³„ì‚°

```javascript
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');

  // ğŸ”´ ì¤‘ë³µëœ state ë° ë¶ˆí•„ìš”í•œ Effect
  const [fullName, setFullName] = useState('');
  useEffect(() => {
    setFullName(firstName + ' ' + lastName);
  }, [firstName, lastName]);
  // ...
}
```

```javascript
function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  // âœ… ë Œë”ë§ ì¤‘ì— ê³„ì‚°ë¨
  const fullName = firstName + ' ' + lastName;
  // ...
}
```

## props ë³€ê²½ì— ë”°ë¼ ë°ì´í„°ë¥¼ ìˆ˜ì •í•´ì•¼ í•˜ëŠ” ê²½ìš°

- ë¶ˆí•„ìš”í•œ ë¦¬ë Œë”ë§ì„ ë°œìƒì‹œí‚´

```javascript
function TodoList({ todos, filter }) {
  const [newTodo, setNewTodo] = useState('');

  // ğŸ”´ ì¤‘ë³µëœ state ë° ë¶ˆí•„ìš”í•œ íš¨ê³¼
  const [visibleTodos, setVisibleTodos] = useState([]);
  useEffect(() => {
    setVisibleTodos(getFilteredTodos(todos, filter));
  }, [todos, filter]);

  // ...
}
```

- ì»´í¬ë„ŒíŠ¸ê°€ ë¦¬ë Œë”ë§ ë  ë•Œë§ˆë‹¤ visibleTodosê°€ ì—…ë°ì´íŠ¸ ë˜ê¸° ë•Œë¬¸ì— ìµœì‹  uië¥¼ ë³´ì¥

```javascript
function TodoList({ todos, filter }) {
  const [newTodo, setNewTodo] = useState('');
  // âœ… getFilteredTodos()ê°€ ëŠë¦¬ì§€ ì•Šë‹¤ë©´ ê´œì°®ìŠµë‹ˆë‹¤.
  const visibleTodos = getFilteredTodos(todos, filter);
  // ...
}
```

- ë³µì¡í•œ ì—°ì‚°ì´ë¼ë©´ `useMemo` í™œìš©

```javascript
import { useMemo, useState } from 'react';

function TodoList({ todos, filter }) {
  const [newTodo, setNewTodo] = useState('');
  // âœ… todosë‚˜ filterê°€ ë³€ê²½ë˜ì§€ ì•ŠëŠ” í•œ getFilteredTodos()ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
  const visibleTodos = useMemo(() => getFilteredTodos(todos, filter), [todos, filter]);
  // ...
}
```

## props ë³€ê²½ì— ë”°ë¼ ìƒíƒœê°€ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•˜ëŠ” ê²½ìš°

- userId ë³€ê²½ => ë¦¬ë Œë”ë§ => comment ë³€ê²½ => ë¦¬ë Œë”ë§

```javascript
export default function ProfilePage({ userId }) {
  const [comment, setComment] = useState('');

  // ğŸ”´ Effectì—ì„œ prop ë³€ê²½ ì‹œ state ì´ˆê¸°í™”
  useEffect(() => {
    setComment('');
  }, [userId]);
  // ...
}
```

- userId ë³€ê²½ ì‹œ key ê°’ì´ ë³€ê²½ë˜ê¸° ë•Œë¬¸ì— commentë¥¼ ë¦¬ì…‹í•  í•„ìš”ê°€ ì—†ìŒ

- ëª…ì‹œì ì¸ keyë¥¼ ì „ë‹¬í•˜ì—¬ ê° ì‚¬ìš©ìì˜ í”„ë¡œí•„ì´ ê°œë…ì ìœ¼ë¡œ ë‹¤ë¥¸ í”„ë¡œí•„ì„ì„ ì•Œë¦´ ìˆ˜ ìˆìŒ

- keyê°’ì¸ userIdê°€ ë³€ê²½ë  ë•Œë§ˆë‹¤ ReactëŠ” ìƒˆë¡œìš´ DOMì„ ë‹¤ì‹œ ìƒì„±í•˜ê³  stateë¥¼ ì¬ì„¤ì •í•¨

```javascript
export default function ProfilePage({ userId }) {
  return (
    <Profile
      userId={userId}
      key={userId}
    />
  );
}

function Profile({ userId }) {
  // âœ… ì´ state ë° ì•„ë˜ì˜ ë‹¤ë¥¸ stateëŠ” key ë³€ê²½ ì‹œ ìë™ìœ¼ë¡œ ì¬ì„¤ì •ë©ë‹ˆë‹¤.
  const [comment, setComment] = useState('');
  // ...
}
```

## propì´ ë³€ê²½ì— ë”°ë¼ ì¼ë¶€ ìƒíƒœë§Œ ì¡°ì •í•´ì•¼í•˜ëŠ” ê²½ìš°

- itemsê°€ ë³€ê²½ => ë¦¬ë Œë”ë§ => selection ë³€ê²½ => ë¦¬ë Œë”ë§

```javascript
function List({ items }) {
  const [isReverse, setIsReverse] = useState(false);
  const [selection, setSelection] = useState(null);

  // ğŸ”´ Effectì—ì„œ prop ë³€ê²½ ì‹œ state ì¡°ì •í•˜ê¸°
  useEffect(() => {
    setSelection(null);
  }, [items]);
  // ...
}
```

- ë Œë”ë§ì„ ì¤„ì¼ ìˆ˜ëŠ” ìˆì§€ë§Œ ë°ì´í„° íë¦„ì„ ì´í•´í•˜ê³  ë””ë²„ê¹… í•˜ê¸°ì—ëŠ” ë” ì–´ë ¤ì›Œì§

```javascript
function List({ items }) {
  const [isReverse, setIsReverse] = useState(false);
  const [selection, setSelection] = useState(null);

  // ë Œë”ë§ ì¤‘ state ì¡°ì •
  const [prevItems, setPrevItems] = useState(items);
  if (items !== prevItems) {
    setPrevItems(items);
    setSelection(null);
  }
  // ...
}
```

- itemì„ ì €ì¥í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ idë¥¼ ì €ì¥í•¨ìœ¼ë¡œì¨ í•´ê²°

```javascript
function List({ items }) {
  const [isReverse, setIsReverse] = useState(false);
  const [selectedId, setSelectedId] = useState(null);
  // âœ… ë Œë”ë§ ì¤‘ì— ëª¨ë“  ê²ƒì„ ê³„ì‚°
  const selection = items.find((item) => item.id === selectedId) ?? null;
  // ...
}
```

## ì—°ì‡„ì ìœ¼ë¡œ stateë¥¼ ì¡°ì •í•´ì•¼í•˜ëŠ” ê²½ìš°

- setCard => ë¦¬ë Œë”ë§ => setGoldCardCount => ë¦¬ë Œë”ë§ => setRound => ë¦¬ë Œë”ë§ => setIsGameOver => ë¦¬ë Œë”ë§

- ë§¤ìš° ë¹„íš¨ìœ¨ì ì´ê³  ìƒˆë¡œìš´ ìš”êµ¬ì‚¬í•­ì— ëŒ€ì²˜í•˜ê¸°ë„ í˜ë“¬

```javascript
function Game() {
  const [card, setCard] = useState(null);
  const [goldCardCount, setGoldCardCount] = useState(0);
  const [round, setRound] = useState(1);
  const [isGameOver, setIsGameOver] = useState(false);

  // ğŸ”´ ì„œë¡œë¥¼ íŠ¸ë¦¬ê±°í•˜ê¸° ìœ„í•´ì„œë§Œ stateë¥¼ ì¡°ì •í•˜ëŠ” Effect ì²´ì¸
  useEffect(() => {
    if (card !== null && card.gold) {
      setGoldCardCount((c) => c + 1);
    }
  }, [card]);

  useEffect(() => {
    if (goldCardCount > 3) {
      setRound((r) => r + 1);
      setGoldCardCount(0);
    }
  }, [goldCardCount]);

  useEffect(() => {
    if (round > 5) {
      setIsGameOver(true);
    }
  }, [round]);

  useEffect(() => {
    alert('Good game!');
  }, [isGameOver]);

  function handlePlaceCard(nextCard) {
    if (isGameOver) {
      throw Error('Game already ended.');
    } else {
      setCard(nextCard);
    }
  }
}
```

- ë Œë”ë§ ì¤‘ì— ê³„ì‚° ê°€ëŠ¥í•œ ìƒíƒœëŠ” ë¶„ë¦¬

```javascript
function Game() {
  const [card, setCard] = useState(null);
  const [goldCardCount, setGoldCardCount] = useState(0);
  const [round, setRound] = useState(1);

  // âœ… ë Œë”ë§ ì¤‘ì— ê°€ëŠ¥í•œ ê²ƒì„ ê³„ì‚°í•©ë‹ˆë‹¤.
  const isGameOver = round > 5;

  function handlePlaceCard(nextCard) {
    if (isGameOver) {
      throw Error('Game already ended.');
    }

    // âœ… ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ë‹¤ìŒ stateë¥¼ ëª¨ë‘ ê³„ì‚°í•©ë‹ˆë‹¤.
    setCard(nextCard);
    if (nextCard.gold) {
      if (goldCardCount <= 3) {
        setGoldCardCount(goldCardCount + 1);
      } else {
        setGoldCardCount(0);
        setRound(round + 1);
        if (round === 5) {
          alert('Good game!');
        }
      }
    }
  }
}
```

# ê²°ë¡ 

- ë Œë”ë§ ì¤‘ì— ë°”ë¡œ ê³„ì‚°í•  ìˆ˜ ìˆë‹¤ë©´ `useEffect`ê°€ í•„ìš”í•˜ì§€ ì•Šì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `useEffect` ì•ˆì—ì„œ **ì‚¬ìš©í•˜ëŠ” ëª¨ë“  ë³€ìˆ˜ë“¤ì€ ì˜ì¡´ì„± ë°°ì—´ì— ì¶”ê°€**í•˜ëŠ” ê²ƒì´ ì˜ë„ì¹˜ ì•Šì€ ì˜¤ë¥˜ë¥¼ ë°©ì§€ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ì¡°ê±´ë¶€ë¡œ `useEffect` ë¥¼ í™œìš©í•´ì•¼ í•œë‹¤ë©´ í•¨ìˆ˜ ì´ˆê¸°ì— ë°”ë¡œ return í•˜ë„ë¡ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.

- useEffect, eventHandler ë‘˜ ì¤‘ ì–´ë””ì— ì½”ë“œë¥¼ ì‘ì„±í•´ì•¼í• ì§€ ëª¨ë¥´ê² ë‹¤ë©´ ì½”ë“œê°€ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì´ìœ ì— ìƒê°ë´ì•¼ í•©ë‹ˆë‹¤.
  (ìš°ë¦¬ì˜ ì½”ë“œê°€ ìƒíƒœë¥¼ ë³€ê²½í–ˆì„ ë•Œ ì‹¤í–‰í•˜ëŠ” ê²ƒì´ ì˜ë„ì¸ì§€, ìœ ì €ì˜ ì´ë²¤íŠ¸ì— ë”°ë¼ UIë¥¼ ë³€ê²½í•˜ëŠ” ê²ƒì´ ì£¼ ëª©ì ì¸ì§€)

  - `useEffect`ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ë Œë”ë§ë˜ëŠ” ì‹œì ì— ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì½”ë“œ

  - `eventHandler`ëŠ” ì‚¬ìš©ìê°€ í•œ í–‰ë™(ìƒí˜¸ì‘ìš©)ì— ì˜í•´ ì‹¤í–‰ë˜ì–´ì•¼ í•˜ëŠ” ì½”ë“œ

- `useLayoutEffect`ëŠ” ë¸Œë¼ìš°ì €ê°€ í™”ë©´ì„ ê·¸ë¦¬ê¸° ì „ì— ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ DOMì— ì˜í–¥ì„ ì£¼ëŠ” ì½”ë“œê°€ ìˆë‹¤ë©´ ìœ ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ë¹„ìš©ì´ ë§ì´ ë“œëŠ” ì‘ì—…ì€ 'useEffect'ëŒ€ì‹  `useMemo`ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

<br />

[You Might Not Need an Effect](https://react.dev/learn/you-might-not-need-an-effect)
